<!doctype html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />

    <title>Infrastructure tests for lazy people</title>

    <meta name="description" content="Infrastructure tests for lazy people" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <link rel="stylesheet" href="assets/3rdparty/reveal.js/css/reveal.css" />
            <link rel="stylesheet" href="assets/3rdparty/reveal.js/css/theme/simple.css" id="theme" />
    
            <link rel="stylesheet" href="assets/3rdparty/reveal.js/lib/css/zenburn.css" />
    
            <link rel="stylesheet" type="text/css" href="assets/3rdparty/asciinema-player.css" />
        <link rel="stylesheet" href="assets/markdeck/css/markdeck.revealjs.css" />
    <link rel="stylesheet" href="assets/css/slides.css" />

    <script>
        window.pdf_render = window.location.search.match(/render=pdf/gi) != null;
        if (window.pdf_render) {
            document.write('<link rel="stylesheet" href="assets/css/render-pdf.css" type="text/css">');
        }
    </script>

    
</head>
<body>


    <div class="reveal">
        <div class="slides">

<section id="infrastructure-tests-for-lazy-people" class="level1" data-state="sky-gradient-10">
<h1>Infrastructure tests for lazy people</h1>
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: G Pages: 1 -->
<svg width="500pt" height="44pt"
 viewBox="0.00 0.00 500.04 44.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>G</title>
<!-- RSpec tests -->
<g id="node1" class="node"><title>RSpec tests</title>
<ellipse fill="white" stroke="black" cx="50.6955" cy="-18" rx="50.8918" ry="18"/>
<text text-anchor="middle" x="50.6955" y="-14.3" font-family="EB Garamond 12" font-size="14.00">RSpec tests</text>
</g>
<!-- pen tests -->
<g id="node2" class="node"><title>pen tests</title>
<ellipse fill="white" stroke="black" cx="160.696" cy="-18" rx="40.8928" ry="18"/>
<text text-anchor="middle" x="160.696" y="-14.3" font-family="EB Garamond 12" font-size="14.00">pen tests</text>
</g>
<!-- vulnerability scans -->
<g id="node3" class="node"><title>vulnerability scans</title>
<ellipse fill="white" stroke="black" cx="295.696" cy="-18" rx="76.0865" ry="18"/>
<text text-anchor="middle" x="295.696" y="-14.3" font-family="EB Garamond 12" font-size="14.00">vulnerability scans</text>
</g>
<!-- monitoring -->
<g id="node4" class="node"><title>monitoring</title>
<ellipse fill="white" stroke="black" cx="440.696" cy="-18" rx="51.1914" ry="18"/>
<text text-anchor="middle" x="440.696" y="-14.3" font-family="EB Garamond 12" font-size="14.00">monitoring</text>
</g>
</g>
</svg>
</p>
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: H Pages: 1 -->
<svg width="258pt" height="44pt"
 viewBox="0.00 0.00 258.34 44.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>H</title>
<!-- load tests -->
<g id="node1" class="node"><title>load tests</title>
<ellipse fill="white" stroke="black" cx="43.5461" cy="-18" rx="43.5923" ry="18"/>
<text text-anchor="middle" x="43.5461" y="-14.3" font-family="EB Garamond 12" font-size="14.00">load tests</text>
</g>
<!-- chaos engineering -->
<g id="node2" class="node"><title>chaos engineering</title>
<ellipse fill="white" stroke="black" cx="177.546" cy="-18" rx="72.5877" ry="18"/>
<text text-anchor="middle" x="177.546" y="-14.3" font-family="EB Garamond 12" font-size="14.00">chaos engineering</text>
</g>
</g>
</svg>
</p>
<p><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: I Pages: 1 -->
<svg width="62pt" height="44pt"
 viewBox="0.00 0.00 62.00 44.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>I</title>
<!--    -->
<g id="node1" class="node"><title>  </title>
<ellipse fill="white" stroke="black" cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-14.3" font-family="EB Garamond 12" font-size="14.00">  </text>
</g>
</g>
</svg>
</p>
</section>
<section id="let-someone-else-do-the-testing" class="level1" data-state="sky-gradient-11">
<h1>Let someone else do the testing</h1>
<p><img src="rendered/render_ditaa-d7ec0547352e75fbf2ef6a0eea5be8ef92bc4baa.png" alt="" /></p>
</section>
<section id="let-someone-else-write-the-brief" class="level1" data-state="sky-gradient-12">
<h1>Let someone else write the brief</h1>
<p><img src="rendered/render_ditaa-925b99c3350f26b76989d04e63c72437736f4303.png" alt="" /></p>
</section>
<section id="get-someone-else-to-write-the-tests" class="level1 light-on-dark" data-state="sky-gradient-13">
<h1>Get someone else to write the tests</h1>
<p><svg class="marks" width="836" height="316" viewBox="0 0 836 316" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(316,5)"><g class="mark-group role-frame root"><g transform="translate(0,0)"><path class="background" d="M0.5,0.5h500v250h-500Z" style="fill: none; stroke: #ddd;"></path><g><g class="mark-group role-axis"><g transform="translate(0.5,250.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-grid" style="pointer-events: none;"><line transform="translate(0,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(31,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(63,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(94,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(125,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(156,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(188,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(219,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(250,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(281,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(313,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(344,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(375,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(406,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(438,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(469,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(500,0)" x2="0" y2="-250" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line></g></g></g></g><g class="mark-rect role-mark marks"><path d="M0,220.3125h446.875v28.125h-446.875Z" style="fill: rgb(23, 112, 171);"></path><path d="M0,189.0625h339.99999999999994v28.125h-339.99999999999994Z" style="fill: rgb(138, 185, 208);"></path><path d="M0,157.8125h252.5v28.125h-252.5Z" style="fill: rgb(194, 198, 200);"></path><path d="M0,126.5625h236.875v28.125h-236.875Z" style="fill: rgb(201, 197, 194);"></path><path d="M0,95.3125h64.375v28.125h-64.375Z" style="fill: rgb(212, 67, 70);"></path><path d="M0,64.0625h45v28.125h-45Z" style="fill: rgb(203, 40, 53);"></path><path d="M0,32.8125h26.875v28.125h-26.875Z" style="fill: rgb(195, 14, 37);"></path><path d="M0,1.5625h26.250000000000004v28.125h-26.250000000000004Z" style="fill: rgb(195, 13, 36);"></path></g><g class="mark-group role-axis"><g transform="translate(0.5,250.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-tick" style="pointer-events: none;"><line transform="translate(0,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(31,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(63,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(94,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(125,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(156,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(188,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(219,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(250,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(281,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(313,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(344,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(375,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(406,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(438,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(469,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(500,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line></g><g class="mark-text role-axis-label" style="pointer-events: none;"><text text-anchor="middle" transform="translate(0,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">0</text><text text-anchor="middle" transform="translate(31.25,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">5</text><text text-anchor="middle" transform="translate(62.5,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">10</text><text text-anchor="middle" transform="translate(93.75,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">15</text><text text-anchor="middle" transform="translate(125,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">20</text><text text-anchor="middle" transform="translate(156.25,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">25</text><text text-anchor="middle" transform="translate(187.5,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">30</text><text text-anchor="middle" transform="translate(218.75,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">35</text><text text-anchor="middle" transform="translate(250,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">40</text><text text-anchor="middle" transform="translate(281.25,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">45</text><text text-anchor="middle" transform="translate(312.5,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">50</text><text text-anchor="middle" transform="translate(343.75,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">55</text><text text-anchor="middle" transform="translate(375,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">60</text><text text-anchor="middle" transform="translate(406.25,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">65</text><text text-anchor="middle" transform="translate(437.5,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">70</text><text text-anchor="middle" transform="translate(468.75,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">75</text><text text-anchor="middle" transform="translate(500,21)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">80</text></g><g class="mark-rule role-axis-domain" style="pointer-events: none;"><line transform="translate(0,0)" x2="500" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line></g><g class="mark-text role-axis-title" style="pointer-events: none;"><text text-anchor="middle" transform="translate(250,49)" style="font-family: EB Garamond; font-size: 24px; font-weight: bold; fill: white; opacity: 1;">Developers (%)</text></g></g></g></g><g class="mark-group role-axis"><g transform="translate(-4.5,0.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-text role-axis-label" style="pointer-events: none;"><text text-anchor="end" transform="translate(-2,19.625)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Perl</text><text text-anchor="end" transform="translate(-2,50.875)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Groovy</text><text text-anchor="end" transform="translate(-2,82.125)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Go</text><text text-anchor="end" transform="translate(-2,113.375)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Ruby</text><text text-anchor="end" transform="translate(-2,144.625)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Python</text><text text-anchor="end" transform="translate(-2,175.875)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Bash/Shell</text><text text-anchor="end" transform="translate(-2,207.125)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">Java</text><text text-anchor="end" transform="translate(-2,238.375)" style="font-family: EB Garamond; font-size: 18px; fill: white; opacity: 1;">JavaScript</text></g><g class="mark-text role-axis-title" style="pointer-events: none;"><text text-anchor="middle" transform="translate(-151,120)" style="font-family: EB Garamond; font-size: 24px; font-weight: bold; fill: white; opacity: 1;">Language</text></g></g></g></g></g></g></g></g></svg></p>
<p><small>Source: “Programming, scripting and markup languages”, <a href="https://insights.stackoverflow.com/survey/2018/">Stack Overflow survey 2018</a></small></p>
</section>
<section id="operations" class="level1 light-on-dark" data-state="sky-gradient-14">
<h1>Operations</h1>
<pre class="bash"><code>test_self_provisioner() {
  count_self_provisioner=`oc adm policy who-can create projectrequests \
    2&gt;/dev/null | grep -c system:authenticated`
  assertEquals &quot; non-admin users must not create project requests;&quot; \
    0 ${count_self_provisioner}
}
suite_addTest test_self_provisioner</code></pre>
</section>
<section id="development" class="level1 light-on-dark" data-state="sky-gradient-15">
<h1>Development</h1>
<pre class="bash"><code>test_anyuid() {
  scc_anyuid=`oc describe scc anyuid 2&gt;/dev/null`
  for project in ${USER_PROJECTS}; do
    count_anyuid_default=`echo ${scc_anyuid} | \
      grep -c &quot;Users:.*system:serviceaccount:${project}:default&quot;`
    assertEquals \
      &quot; service account default in project ${project} has SCC anyuid;&quot; \
      0 ${count_anyuid_default}
  done
}
suite_addTest test_anyuid</code></pre>
</section>
<section id="architecture" class="level1 light-on-dark" data-state="sky-gradient-16">
<h1>Architecture</h1>
<pre class="bash"><code>test_high_availability() {
  for svc in ${HA_SERVICES}; do
    nodes=`oc get po --all-namespaces -o wide | grep ${svc} | \
      awk &#39;{ print $8 }&#39;`
    zones=&quot;&quot;
    for node in ${nodes}; do
      zones=&quot;${zones} `oc get node/${node} -L zone | \
        awk &#39;{print $6}&#39; | tail -n +2`&quot;
    done
    zone_count=`echo ${zones} | tr &#39; &#39; &#39;\n&#39; | sort -u | wc -l`
    ha=$((zone_count &gt; 2))
    assertTrue &quot; ${svc} must be distributed across 3 zones;&quot; ${ha}
  done
}
suite_addTest test_high_availability</code></pre>
</section>
<section id="let-others-build-the-infrastructure-for-you" class="level1 light-on-dark" data-state="sky-gradient-17">
<h1>Let others build the infrastructure for you</h1>
<p><img src="rendered/render_ditaa-3a3089eaeb32af833bc1f4a6352be5dc5c512884.png" alt="" /></p>
</section>
<section id="whats-left" class="level1 light-on-dark" data-state="sky-gradient-18">
<h1>What’s left?</h1>
<p><asciinema-player src="./assets/img/openshift-unit.json" poster="npt:0:10" idle-time-limit=1 speed=2 rows=18 font-size="medium"></asciinema-player></p>
</section>
<section id="why-do-today-what-can-be-done-tomorrow" class="level1 light-on-dark" data-state="sky-gradient-23">
<h1>Why do today what can be done tomorrow?</h1>
<p>Do use tests to define the desired cluster state</p>
<p>Don’t fret if it takes longer than expected to reach it</p>
<p>Do take pride in the work not done</p>
</section>
<section id="unwind-on-github" class="level1 light-on-dark" data-state="sky-gradient-03">
<h1>Unwind on GitHub</h1>
<p><small>OpenShift cluster tests <a href="https://github.com/gerald1248/openshift-unit">gerald1248/openshift-unit</a></small></p>
<p><small>OpenShift project backup <a href="https://github.com/gerald1248/openshift-backup">gerald1248/openshift-backup</a></small></p>
<p><small>Slides courtesy of markdeck by <span class="citation" data-cites="arnehilmann">@arnehilmann</span> <a href="https://github.com/arnehilmann/markdeck">arnehilmann/markdeck</a></small></p>
<p><img width="100" src="assets/img/codecentric-logo-only.png" alt="codecentric AG"/></p>
</section>

        </div>
    </div>

    <script src="assets/3rdparty/jquery.js"></script>

    <script src="assets/3rdparty/reveal.js/lib/js/head.min.js"></script>
    <script src="assets/3rdparty/reveal.js/js/reveal.js"></script>

    <script>
        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: '',
            controlsTutorial: '',
            controlsLayout: 'bottom-right',
            controlsBackArrows: 'faded',
            progress: 'true',
            defaultTiming: '120',
            slideNumber: 'true',
            history: 'true',
            keyboard: 'true',
            overview: 'true',
            center: 'true',
            touch: 'true',
            loop: '',
            rtl: '',
            shuffle: '',
            fragments: 'true',
            embedded: '',
            help: 'true',
            showNotes: '',
            autoPlayMedia: '',

            autoSlide: (window.pdf_render) ? 0 : 0,

            autoSlideStoppable: 'true',
            autoSlideMethod: 'Reveal.navigateNext',
            mouseWheel: '',
            hideAddressBar: 'true',
            previewLinks: '',
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',

            theme: 'simple',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'assets/3rdparty/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                { src: 'assets/markdeck/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                { src: 'assets/3rdparty/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                { src: 'assets/3rdparty/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
            ]
        });
    </script>

            <script src="assets/3rdparty/asciinema-player.js"></script>
    
    <script src="assets/markdeck/revealjs-helper.js"></script>
    <script>
        flushleft(".slides .flushleft");
    </script>


</body>
</html>
